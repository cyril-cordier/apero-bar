(this["webpackJsonpapero-bar"]=this["webpackJsonpapero-bar"]||[]).push([[0],{43:function(e,t,c){},44:function(e,t,c){},69:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c(1),r=c.n(a),s=c(34),o=c.n(s),l=(c(43),c(44),c(13)),i=c(2),u=Object(a.createContext)(),j=function(e){var t=Object(a.useState)([]),c=Object(i.a)(t,2),r=c[0],s=c[1],o=Object(a.useState)(""),j=Object(i.a)(o,2),b=j[0],d=j[1],O=Object(a.useState)(""),m=Object(i.a)(O,2),h=m[0],p=m[1],x=Object(a.useState)(null),f=Object(i.a)(x,2),v=f[0],g=f[1],N=Object(a.useState)([]),S=Object(i.a)(N,2),C=S[0],k=S[1],w=Object(a.useState)(null),y=Object(i.a)(w,2),B=y[0],I=y[1],F=Object(a.useState)(null),P=Object(i.a)(F,2),L=P[0],_=P[1];return Object(n.jsx)(u.Provider,{value:{bottles:r,setBottles:s,addBottles:function(e){s([].concat(Object(l.a)(r),[e]))},search:b,setSearch:d,selectedBottle:B,setSelectedBottle:I,message:L,setMessage:_,token:h,setToken:p,user:v,setUser:g,ingredients:C,setIngredients:k,addIngredients:function(e){k([].concat(Object(l.a)(C),[e]))}},children:e.children})},b=c(7),d=c(5),O=c(3),m=c.n(O),h=c(6),p=c(35),x=c.n(p).a.create({baseURL:"https://api-apero-bar.herokuapp.com/api"}),f=function(e){var t=e.headers,c=e.onSorting,r=Object(a.useState)(""),s=Object(i.a)(r,2),o=s[0],l=s[1],u=Object(a.useState)("asc"),j=Object(i.a)(u,2),b=j[0],d=j[1];return Object(n.jsx)("thead",{className:"bg-primary text-white",children:Object(n.jsx)("tr",{children:t.map((function(e){var t=e.name,a=e.field,r=e.sortable;return Object(n.jsxs)("th",{onClick:function(){return r?function(e){var t=e===o&&"asc"===b?"desc":"asc";l(e),d(t),c(e,t)}(a):null},children:[t,o&&o===a&&("asc"===b?Object(n.jsx)("i",{className:"fas fa-arrow-down"}):Object(n.jsx)("i",{class:"fas fa-arrow-up"}))]},t)}))})})},v=function(e){var t=e.onSearch,c=Object(a.useState)(""),r=Object(i.a)(c,2),s=r[0],o=r[1];return Object(n.jsx)("input",{type:"text",className:"form-control",style:{width:"240px"},placeholder:"Recherche",value:s,onChange:function(e){var c;c=e.target.value,o(c),t(c)}})},g=c(17),N=function(e){var t=e.total,c=void 0===t?0:t,r=e.itemsPerPage,s=void 0===r?3:r,o=e.currentPage,l=void 0===o?1:o,u=e.onPageChange,j=Object(a.useState)(0),b=Object(i.a)(j,2),d=b[0],O=b[1];Object(a.useEffect)((function(){c>0&&s>0&&O(Math.ceil(c/s))}),[c,s]);var m=Object(a.useMemo)((function(){for(var e=[],t=function(t){e.push(Object(n.jsx)(g.a.Item,{active:t===l,onClick:function(){return u(t)},children:t},t))},c=1;c<=d;c++)t(c);return e}),[d,l,u]);return 0===d?null:Object(n.jsxs)(g.a,{children:[Object(n.jsx)(g.a.Prev,{onClick:function(){return u(l-1)},disabled:1===l}),m,Object(n.jsx)(g.a.Next,{onClick:function(){return u(l+1)},disabled:l===d})]})},S=c.p+"static/media/loading.2187296e.gif",C=function(){return Object(n.jsx)("div",{className:"fp-container",children:Object(n.jsx)("img",{src:S,alt:"chargement",className:"fp-loader"})})},k=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),c=t[0],r=t[1];return[c?Object(n.jsx)(C,{}):null,function(){return r(!0)},function(){return r(!1)}]};function w(e){var t=Object(a.useContext)(u),c=t.user,r=t.bottles,s=t.setBottles,o=t.token,j=(t.setIngredients,k()),b=Object(i.a)(j,3),O=b[0],p=b[1],g=b[2],S=Object(a.useState)(0),C=Object(i.a)(S,2),w=C[0],y=C[1],B=Object(a.useState)(1),I=Object(i.a)(B,2),F=I[0],P=I[1],L=Object(a.useState)(""),_=Object(i.a)(L,2),M=_[0],E=_[1],U=Object(a.useState)({field:"",order:""}),A=Object(i.a)(U,2),D=A[0],T=A[1],z=Object(a.useState)([{name:"Nom",field:"name",sortable:!0},{name:"Type",field:"type",sortable:!0},{name:"Pays/R\xe9gion",field:"country",sortable:!0},{name:"Mill\xe9sime",field:"vintage",sortable:!0}]),R=Object(i.a)(z,2),J=R[0],V=R[1],G=Object(d.g)();Object(a.useEffect)((function(){c&&!0===c.is_admin&&V([].concat(Object(l.a)(J),[{name:"actions",field:"actions"}]))}),[c]),Object(a.useEffect)((function(){(function(){var e=Object(h.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(),e.prev=1,e.next=4,x.get("/bouteilles",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("bottletoken"),"}")}});case 4:t=e.sent,console.log("\ud83d\ude80 ~ file: BottlesList.js ~ line 42 ~ fetchData ~ fetchBottle",t),s(t.data),g(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}})()()}),[s]);var H=function(){var e=Object(h.a)(m.a.mark((function e(t,c){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(c),t.stopPropagation(),e.prev=2,e.next=5,x.delete("/bouteilles/".concat(c),{headers:{Authorization:"Bearer ".concat(o)}});case 5:n=e.sent,s(r.filter((function(e){return e.id!==c}))),console.log(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,c){return e.apply(this,arguments)}}(),q=Object(a.useMemo)((function(){var e=r;if(M&&(e=e.filter((function(e){return e.name.toLowerCase().includes(M.toLowerCase())||e.category.toLowerCase().includes(M.toLowerCase())||e.type.toLowerCase().includes(M.toLowerCase())||e.country.toLowerCase().includes(M.toLowerCase())}))),y(e.length),D.field){var t="asc"===D.order?1:-1;e=e.sort((function(e,c){return t*e[D.field].localeCompare(c[D.field])}))}return e.slice(50*(F-1),50*(F-1)+50)}),[r,F,M,D]);return Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"row w-100",children:Object(n.jsx)("div",{className:"col mb-3 col-12 text-center",children:Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col-md-6",children:Object(n.jsx)(N,{total:w,itemsPerPage:50,currentPage:F,onPageChange:function(e){return P(e)}})}),Object(n.jsx)("div",{className:"col-md-6 d-flex flex-row-reverse",children:Object(n.jsx)(v,{onSearch:function(e){E(e),P(1)}})})]})})}),Object(n.jsxs)("table",{className:"table table-hover",children:[Object(n.jsx)(f,{headers:J,onSorting:function(e,t){return T({field:e,order:t})}}),Object(n.jsx)("tbody",{children:q&&q.map((function(e){return Object(n.jsxs)("tr",{onClick:function(){return t=e._id,void G.push("/bottles/".concat(t));var t},children:[Object(n.jsx)("td",{children:e.name}),Object(n.jsx)("td",{children:e.type}),Object(n.jsx)("td",{children:e.country}),Object(n.jsx)("td",{children:e.vintage}),c&&c.is_admin?Object(n.jsxs)("td",{className:"row",children:[Object(n.jsx)("button",{className:"btn btn-warning",onClick:function(t){return function(e,t){e.stopPropagation(),G.push("/bottles/".concat(t,"/update"))}(t,e._id)},children:"M\xe0j"}),Object(n.jsx)("button",{className:"btn btn-danger",onClick:function(t){return H(t,e._id)},children:"Sup"})]}):null]},e.id)}))})]}),O]})}function y(){var e=Object(a.useContext)(u),t=e.message;e.user;return Object(n.jsxs)("div",{children:[t?Object(n.jsx)("div",{className:"alert alert-success",children:t}):null,Object(n.jsx)("h1",{children:"Ap\xe9ro-Bar de Cyril"}),Object(n.jsx)(w,{})]})}var B=c(14),I=function(){var e=Object(d.g)(),t=Object(a.useContext)(u),c=t.message,r=t.setMessage,s=t.setToken,o=t.setUser,l=Object(a.useState)(""),j=Object(i.a)(l,2),O=j[0],p=j[1],f=Object(a.useState)(""),v=Object(i.a)(f,2),g=v[0],N=v[1],S=Object(a.useState)(""),C=Object(i.a)(S,2),k=(C[0],C[1]),w=Object(a.useState)(""),y=Object(i.a)(w,2),I=y[0],F=y[1],P=function(){var t=Object(h.a)(m.a.mark((function t(c){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),t.prev=1,t.next=4,x.post("/auth",{username:O,password:g});case 4:n=t.sent,k(""),F(""),console.log(n),n.data.access_token&&(localStorage.setItem("bottletoken",n.data.access_token),s(n.data.access_token),o(Object(B.a)(n.data.access_token)),r("Vous \xeates connect\xe9"),e.push("/")),t.next=17;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(JSON.stringify(t.t0.message.substr(-3))),F(t.t0.message.substr(-3)),console.log("code",I),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}();return Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:"Login"}),c?Object(n.jsx)("div",{className:"alert alert-success",children:c}):null,Object(n.jsxs)("form",{className:"mb-2",action:"submit",children:[Object(n.jsxs)("div",{className:"form-row",children:[Object(n.jsxs)("div",{className:"form-group col-8",children:[Object(n.jsx)("label",{htmlFor:"username",children:"Username"}),Object(n.jsx)("input",{value:O,onChange:function(e){return p(e.target.value)},id:"username",placeholder:"Username",type:"text",className:"form-control"})]}),Object(n.jsxs)("div",{className:"form-group col-8",children:[Object(n.jsx)("label",{htmlFor:"password",children:"Mot de passe"}),Object(n.jsx)("input",{value:g,onChange:function(e){return N(e.target.value)},id:"password",placeholder:"Mot de passe",type:"password",className:"form-control"})]})]}),Object(n.jsx)("button",{type:"submit",onClick:P,className:"btn btn-primary",children:"Submit"})]}),Object(n.jsx)(b.b,{to:"/register",children:Object(n.jsx)("button",{className:"btn btn-primary",children:"Go to Register"})}),Object(n.jsx)(b.b,{to:"/",children:Object(n.jsx)("button",{className:"btn btn-primary",children:"Home"})})]})},F=function(){var e=Object(d.g)(),t=Object(a.useState)(""),c=Object(i.a)(t,2),r=c[0],s=c[1],o=Object(a.useState)(""),l=Object(i.a)(o,2),j=l[0],O=l[1],p=Object(a.useState)(""),f=Object(i.a)(p,2),v=f[0],g=f[1],N=Object(a.useState)(""),S=Object(i.a)(N,2),C=S[0],k=S[1],w=Object(a.useState)(""),y=Object(i.a)(w,2),B=y[0],I=y[1],F=Object(a.useContext)(u).setMessage,P=function(){var t=Object(h.a)(m.a.mark((function t(c){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),t.prev=1,t.next=4,x.post("/users/register",{username:r,password:j});case 4:n=t.sent,g(""),I(""),F("Votre compte a bien \xe9t\xe9 cr\xe9\xe9. Vous pouvez vous connecter."),e.push("/login"),console.log(JSON.stringify(n)),t.next=18;break;case 12:t.prev=12,t.t0=t.catch(1),console.log(JSON.stringify(t.t0.message.substr(-3))),I(t.t0.message.substr(-3)),console.log("code",B),t.t0?g("Erreur d'identifiants ou de mot de passe"):g("");case 18:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){k("500"===B?"L'identifiant n'est pas un username":""),k("409"===B?"L'adresse username existe d\xe9j\xe0":"")}),[B]),Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:"Register"}),Object(n.jsxs)("div",{className:"mb-2",children:[Object(n.jsxs)("div",{className:"form-row",children:[Object(n.jsxs)("div",{className:"form-group col-8",children:[Object(n.jsx)("label",{htmlFor:"username",children:"Username"}),Object(n.jsx)("input",{value:r,onChange:function(e){return s(e.target.value)},id:"username",placeholder:"Username",type:"text",className:"form-control"})]}),Object(n.jsxs)("div",{className:"form-group col-8",children:[Object(n.jsx)("label",{htmlFor:"password",children:"Mot de passe"}),Object(n.jsx)("input",{value:j,onChange:function(e){return O(e.target.value)},id:"password",placeholder:"Mot de passe",type:"password",className:"form-control"})]})]}),C?Object(n.jsx)("p",{className:"alert alert-danger",children:C}):"",v?Object(n.jsx)("p",{className:"alert alert-danger",children:v}):"",Object(n.jsx)("button",{type:"submit",onClick:P,className:"btn btn-primary",children:"Submit"})]}),Object(n.jsx)(b.b,{to:"/login",children:Object(n.jsx)("button",{className:"btn btn-primary",children:"Go to Login"})})]})};function P(e){var t=Object(a.useContext)(u).token,c=Object(d.h)().id,r=Object(d.g)(),s=Object(a.useState)(""),o=Object(i.a)(s,2),l=o[0],j=o[1],b=Object(a.useState)(""),O=Object(i.a)(b,2),p=O[0],f=O[1],v=Object(a.useState)(""),g=Object(i.a)(v,2),N=g[0],S=g[1],C=Object(a.useState)(""),k=Object(i.a)(C,2),w=k[0],y=k[1],B=Object(a.useState)(""),I=Object(i.a)(B,2),F=I[0],P=I[1],L=Object(a.useState)(""),_=Object(i.a)(L,2),M=_[0],E=_[1];Object(a.useEffect)((function(){(function(){var e=Object(h.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get("/bottles/".concat(c));case 2:t=e.sent,console.log(t.data.Bottle),j(t.data.Bottle.name),f(t.data.Bottle.ingredients),y(t.data.Bottle.price),P(t.data.Bottle.base),E(t.data.Bottle.status),S(t.data.Bottle.special);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[c]);var U=function(){var e=Object(h.a)(m.a.mark((function e(n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=JSON.stringify([{propName:"name",value:l},{propName:"price",value:w},{propName:"base",value:F},{propName:"special",value:N},{propName:"status",value:M},{propName:"ingredients",value:p}]),e.prev=2,e.next=5,x("/bottles/".concat(c),{method:"patch",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},data:a});case 5:r.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{className:"text-center",children:"Update Bottle"}),Object(n.jsx)("p",{className:"text-center",children:"secret page"}),Object(n.jsxs)("form",{action:"submit",children:[Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"name",children:"Name"}),Object(n.jsx)("input",{value:l,onChange:function(e){return j(e.target.value)},id:"name",type:"text",className:"form-control"})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"ingredients",children:"Ingr\xe9dients"}),Object(n.jsx)("input",{value:p,onChange:function(e){return f(e.target.value)},id:"ingredients",type:"text",className:"form-control"})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"price",children:"Prix"}),Object(n.jsx)("input",{value:w,onChange:function(e){return y(e.target.value)},id:"price",type:"text",className:"form-control"})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"base",children:"Base"}),Object(n.jsx)("input",{value:F,onChange:function(e){return P(e.target.value)},id:"base",type:"text",className:"form-control"})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"status",children:"Statut"}),Object(n.jsx)("input",{value:M,onChange:function(e){return E(e.target.value)},id:"status",type:"text",className:"form-control"})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"special",children:"Speciale ?"}),Object(n.jsx)("input",{value:N,onChange:function(e){return S(e.target.value)},id:"special",type:"text",className:"form-control"})]}),Object(n.jsx)("button",{type:"submit",onClick:U,className:"btn btn-primary",children:"Submit"}),Object(n.jsx)("button",{onClick:function(){return r.push("/")},className:" btn btn-primary mx-5",children:"Cancel"})]})]})}function L(){var e=Object(d.h)().id,t=Object(a.useState)(""),c=Object(i.a)(t,2),r=c[0],s=c[1],o=Object(a.useState)(""),l=Object(i.a)(o,2),u=l[0],j=l[1];return Object(a.useEffect)((function(){(function(){var t=Object(h.a)(m.a.mark((function t(){var c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.get("/bottles/".concat(e));case 2:c=t.sent,console.log(c.data.Bottle),s(c.data.Bottle.name),j(c.data.Bottle.ingredients);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]),Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{className:"text-center",children:"Detail Bottle"}),Object(n.jsxs)("form",{action:"",children:[Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)("h2",{children:r})}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"ingredients",children:"Ingr\xe9dients :"}),Object(n.jsx)("p",{children:u})]})]})]})}function _(){var e=Object(a.useContext)(u),t=e.addBottles,c=e.token,r=e.ingredients,s=Object(a.useState)(""),o=Object(i.a)(s,2),j=o[0],b=o[1],O=Object(a.useState)([]),p=Object(i.a)(O,2),f=p[0],v=p[1],g=Object(a.useState)(""),N=Object(i.a)(g,2),S=N[0],C=N[1],k=Object(a.useState)("Sauce tomate"),w=Object(i.a)(k,2),y=w[0],B=w[1],I=Object(a.useState)(!1),F=Object(i.a)(I,2),P=F[0],L=F[1],_=Object(a.useState)("disponible"),M=Object(i.a)(_,2),E=M[0],U=M[1],A=Object(d.g)(),D=function(){var e=Object(h.a)(m.a.mark((function e(n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,x.post("/bottles",{name:j,ingredients:f[0]?f[0].substr(0,1).toUpperCase()+f.join(", ").substr(1):"",price:S,special:P,base:y,status:E},{headers:{Authorization:"Bearer ".concat(c)}});case 4:a=e.sent,t(a.data.createdBottle),A.push("/"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{className:"text-center",children:"Add Bottle"}),Object(n.jsx)("p",{className:"text-center",children:"secret page"})]}),Object(n.jsxs)("form",{className:"mb-4",action:"",children:[Object(n.jsxs)("div",{className:"row form-row",children:[Object(n.jsx)("div",{className:"col",children:Object(n.jsx)("input",{type:"text",value:j,onChange:function(e){return b(e.target.value)},className:"form-control",placeholder:"Nom"})}),Object(n.jsx)("div",{className:"col",children:Object(n.jsx)("input",{type:"text",value:S,onChange:function(e){return C(e.target.value)},className:"form-control",placeholder:"Prix"})})]}),Object(n.jsxs)("div",{className:"row form-row",children:[Object(n.jsx)("div",{className:"col",children:Object(n.jsxs)("select",{className:" form-control",value:y,onChange:function(e){return B(e.target.value)},children:[Object(n.jsx)("option",{children:"Sauce tomate"}),Object(n.jsx)("option",{children:"Cr\xe8me fra\xeeche"})]})}),Object(n.jsx)("div",{className:"col",children:Object(n.jsxs)("select",{className:" form-control",value:P,onChange:function(e){return L(e.target.value)},children:[Object(n.jsx)("option",{value:"false",children:"Ordinaire"}),Object(n.jsx)("option",{value:"true",children:"Sp\xe9ciale"})]})})]}),Object(n.jsx)("div",{className:"row form-row",children:Object(n.jsx)("div",{className:"col",children:Object(n.jsxs)("select",{className:" form-control",value:E,onChange:function(e){return U(e.target.value)},children:[Object(n.jsx)("option",{value:"true",children:"Disponible"}),Object(n.jsx)("option",{value:"false",children:"Non disponible"})]})})}),Object(n.jsx)("div",{className:"row from-row",children:Object(n.jsxs)("div",{className:"col",children:[Object(n.jsx)("p",{className:"mt-3",children:"Ingr\xe9dients :"}),Object(n.jsxs)("p",{children:[f[0]?f[0].substr(0,1).toUpperCase()+f.join(", ").substr(1):""," "]})]})}),Object(n.jsx)("div",{className:"form-group"}),r?r.map((function(e){return Object(n.jsxs)("div",{className:"form-check form-check-inline",children:[Object(n.jsx)("input",{className:"form-check-input",type:"checkbox",id:e._id,value:e.name,onClick:function(e){return function(e){var t=f.includes(e);v(t?f.filter((function(t){return t!==e})):[].concat(Object(l.a)(f),[e]))}(e.target.value)}}),Object(n.jsx)("label",{className:"form-check-label",htmlFor:e._id,children:e.name.substr(0,1).toUpperCase()+e.name.substr(1)})]},e._id)})):null,Object(n.jsx)("button",{type:"submit",onClick:D,className:"btn btn-primary col mx-3",children:"Add"})]})]})}var M=c(18),E=c(37),U=function(e){var t=e.component,c=Object(E.a)(e,["component"]),r=Object(a.useContext)(u).setUser;return Object(a.useEffect)((function(){localStorage.getItem("bottletoken")?r(Object(B.a)(localStorage.getItem("bottletoken"))):r(null)}),[r]),localStorage.getItem("bottletoken")?Object(n.jsx)(d.b,Object(M.a)(Object(M.a)({},c),{},{render:function(e){return Object(n.jsx)(t,Object(M.a)(Object(M.a)({},c),e))}})):Object(n.jsx)(d.a,{to:"/login"})},A=function(){var e=Object(a.useContext)(u),t=e.ingredients,c=e.addIngredients,r=e.token,s=Object(a.useState)(""),o=Object(i.a)(s,2),l=o[0],j=o[1],b=Object(a.useState)(!1),d=Object(i.a)(b,2),O=d[0],p=d[1],f=Object(a.useState)(null),v=Object(i.a)(f,2),g=v[0],N=v[1],S=Object(a.useState)(""),C=Object(i.a)(S,2),k=C[0],w=C[1],y=Object(a.useState)(!1),B=Object(i.a)(y,2),I=B[0],F=B[1],P="Ingr\xe9dient cr\xe9\xe9 avec succ\xe8s",L="Ingr\xe9dient d\xe9j\xe0 enregistr\xe9",_=function(){var e=Object(h.a)(m.a.mark((function e(n){var a,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),a=t.filter((function(e){return e.name.toLowerCase().includes(l.toLowerCase())})),w("error"),!(a.length>0&&!1===I)){e.next=7;break}N(L),e.next=23;break;case 7:return e.prev=7,e.next=10,x.post("/ingredients",{name:l,base:O},{headers:{Authorization:"Bearer ".concat(r)}});case 10:s=e.sent,c(s.data.createdIngredient),j(""),p(!1),F(!1),N(P),w("success"),setTimeout((function(){N(""),w("")}),2e3),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(7),console.log(e.t0);case 23:case"end":return e.stop()}}),e,null,[[7,20]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"mb-4",children:[Object(n.jsx)("form",{action:"submit",children:Object(n.jsxs)("div",{className:"row form-row",children:[Object(n.jsxs)("div",{className:"col text-center",children:[Object(n.jsx)("label",{htmlFor:"nom",children:"Ingr\xe9dient"}),Object(n.jsx)("input",{type:"text",id:"nom",value:l,onChange:function(e){return j(e.target.value)},className:"form-control",placeholder:"Nom"})]}),Object(n.jsxs)("div",{className:"col text-center",children:[Object(n.jsx)("label",{htmlFor:"base",children:"Base"}),Object(n.jsxs)("select",{id:"base",value:O,onChange:function(e){return p(e.target.value)},className:"form-control mr-sm-2",children:[Object(n.jsx)("option",{disabled:!0,children:"Base"}),Object(n.jsx)("option",{value:"true",children:"Oui"}),Object(n.jsx)("option",{value:"false",children:"Non"})]})]}),Object(n.jsxs)("div",{className:"col text-center",children:[Object(n.jsx)("label",{htmlFor:"forceRecord",children:"Forcer Enregistrement"}),Object(n.jsx)("input",{className:"form-check-input ",type:"checkbox",id:"forceRecord",value:I,onClick:function(){F(!I)}})]}),Object(n.jsx)("button",{type:"submit",onClick:_,className:"btn btn-primary col mx-3",children:"Add"})]})}),g&&k&&"success"===k?Object(n.jsx)("div",{className:"alert alert-success",children:P}):null,g&&k&&"error"===k?Object(n.jsx)("div",{className:"alert alert-danger",children:L}):null]})},D=function(){var e=Object(a.useContext)(u),t=e.ingredients,c=e.setIngredients,r=e.token,s=k(),o=Object(i.a)(s,3),l=o[0],j=o[1],b=o[2],d=Object(a.useState)(0),O=Object(i.a)(d,2),p=O[0],g=O[1],S=Object(a.useState)(1),C=Object(i.a)(S,2),w=C[0],y=C[1],B=Object(a.useState)(""),I=Object(i.a)(B,2),F=I[0],P=I[1],L=Object(a.useState)({field:"",order:""}),_=Object(i.a)(L,2),M=_[0],E=_[1];Object(a.useEffect)((function(){(function(){var e=Object(h.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(),e.prev=1,e.next=4,x("/ingredients");case 4:t=e.sent,b(),c(t.data.Ingredient),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}})()()}),[c]);var U=Object(a.useMemo)((function(){var e=t;if(F&&(e=e.filter((function(e){return e.name.toLowerCase().includes(F.toLowerCase())}))),g(e.length),M.field){var c="asc"===M.order?1:-1;e=e.sort((function(e,t){return c*e[M.field].localeCompare(t[M.field])}))}return e.slice(10*(w-1),10*(w-1)+10)}),[t,w,F,M]),D=function(){var e=Object(h.a)(m.a.mark((function e(n,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.stopPropagation(),e.prev=1,e.next=4,x.delete("/ingredients/".concat(a),{headers:{Authorization:"Bearer ".concat(r)}});case 4:c(t.filter((function(e){return e._id!==a}))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,c){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{className:"text-center",children:"Ingredients disponibles"}),Object(n.jsxs)("div",{className:"row w-100",children:[Object(n.jsx)("div",{className:"col mb-3 col-12 text-center",children:Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col-md-6",children:Object(n.jsx)(N,{total:p,itemsPerPage:10,currentPage:w,onPageChange:function(e){return y(e)}})}),Object(n.jsx)("div",{className:"col-md-6 d-flex flex-row-reverse",children:Object(n.jsx)(v,{onSearch:function(e){P(e),y(1)}})})]})}),Object(n.jsx)(A,{})]}),Object(n.jsxs)("table",{className:"table table-hover",children:[Object(n.jsx)(f,{headers:[{name:"Nom",field:"name",sortable:!0},{name:"Base",field:"base"},{name:"actions"}],onSorting:function(e,t){return E({field:e,order:t})}}),Object(n.jsx)("tbody",{children:U.map((function(e){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:e.name}),Object(n.jsx)("td",{children:!0===e.base?"Oui":"Non"}),Object(n.jsx)("td",{children:Object(n.jsx)("button",{className:"btn btn-danger",onClick:function(t){return D(t,e._id)},children:"Sup"})})]},e._id)}))})]}),l]})},T=function(){var e=Object(a.useContext)(u),t=e.message,c=e.setMessage,r=e.user,s=e.setUser,o=e.setToken;Object(a.useEffect)((function(){setTimeout((function(){c("")}),5e3)}),[t,c]),Object(a.useEffect)((function(){localStorage.getItem("bottletoken")?(s(Object(B.a)(localStorage.getItem("bottletoken"))),o(localStorage.getItem("bottletoken"))):s(null)}),[s,o]);return Object(n.jsxs)("div",{children:[r?Object(n.jsx)(b.b,{to:"/",children:Object(n.jsx)("button",{className:"btn btn-primary float-right",onClick:function(){s(null),localStorage.removeItem("bottletoken")},children:"D\xe9connecter"})}):Object(n.jsx)(b.b,{to:"/login",children:Object(n.jsx)("button",{className:"btn btn-primary float-right",children:"Login"})}),Object(n.jsx)(b.b,{to:"/",children:Object(n.jsx)("button",{className:"btn btn-primary",children:"Home"})}),r&&!0===r.is_admin?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(b.b,{to:"/addbottle",children:Object(n.jsx)("button",{className:"btn btn-primary",children:"Add a Bottle"})}),Object(n.jsx)(b.b,{to:"/ingredients",children:Object(n.jsx)("button",{className:"btn btn-primary",children:"Ingredients"})})]}):null]})};var z=function(){return Object(n.jsx)(j,{children:Object(n.jsx)("div",{className:"container",children:Object(n.jsxs)(b.a,{children:[Object(n.jsx)(T,{}),Object(n.jsxs)(d.d,{children:[Object(n.jsx)(d.b,{exact:!0,path:"/",component:y}),Object(n.jsx)(U,{exact:!0,path:"/ingredients",component:D}),Object(n.jsx)(U,{exact:!0,path:"/addbottle",component:_}),Object(n.jsx)(d.b,{exact:!0,path:"/login",component:I}),Object(n.jsx)(d.b,{exact:!0,path:"/register",component:F}),Object(n.jsx)(d.b,{exact:!0,path:"/bottles/:id",component:L}),Object(n.jsx)(d.b,{exact:!0,path:"/bottles/:id/update",component:P}),Object(n.jsx)(d.b,{component:y})]})]})})})},R=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,70)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),n(e),a(e),r(e),s(e)}))};o.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(z,{})}),document.getElementById("root")),R()}},[[69,1,2]]]);
//# sourceMappingURL=main.c0a17f17.chunk.js.map